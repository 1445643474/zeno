add_definitions(-DBT_THREAD_SAFE)
add_subdirectory(bullet3)
add_subdirectory(HACD)

file (GLOB ZEN_RIGID_SOURCE *.cpp)
target_sources(zeno PRIVATE ${ZEN_RIGID_SOURCE})
target_include_directories(zeno PRIVATE .)
target_include_directories(zeno PRIVATE bullet3/src)

#if (UNIX)
    #set(CMAKE_LINK_WHAT_YOU_USE TRUE)
    #target_link_libraries(zeno PRIVATE -Wl,--whole-archive)
#endif()
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:LinearMath>)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:Bullet3Common>)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:BulletInverseDynamics>)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:BulletCollision>)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:BulletDynamics>)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:BulletSoftBody>)
target_link_libraries(zeno PRIVATE $<BUILD_INTERFACE:HACD>)
# if (UNIX)
#     target_link_libraries(zeno PRIVATE -Wl,--no-whole-archive)
# endif()
