add_definitions(-DBT_THREAD_SAFE)
add_subdirectory(bullet3)
add_subdirectory(HACD)

file (GLOB ZEN_RIGID_SOURCE *.cpp)
target_sources(zeno PRIVATE ${ZEN_RIGID_SOURCE})
target_include_directories(zeno PRIVATE .)
target_include_directories(zeno PRIVATE bullet3/src)

target_link_libraries(zeno PRIVATE spdlog)

if (UNIX)
    set(CMAKE_LINK_WHAT_YOU_USE TRUE)
    target_link_libraries(zeno PRIVATE -Wl,--whole-archive)
endif()
target_link_libraries(zeno PRIVATE LinearMath)
target_link_libraries(zeno PRIVATE Bullet3Common)
target_link_libraries(zeno PRIVATE BulletInverseDynamics)
target_link_libraries(zeno PRIVATE BulletCollision)
target_link_libraries(zeno PRIVATE BulletDynamics)
target_link_libraries(zeno PRIVATE BulletSoftBody)
target_link_libraries(zeno PRIVATE HACD)
if (UNIX)
    target_link_libraries(zeno PRIVATE -Wl,--no-whole-archive)
endif()
